# --- pnpm Store Configuration ---
store-dir=/home/hazem032012/usb/.store/v3       # Specify a custom cache location, for example, an external drive or SSD for better performance.

ignore-workspace-root-check=true


# --- General Performance Optimizations ---
prefer-frozen-lockfile=true                     # Use the frozen lockfile to prevent updates, reducing risk in CI/CD.
strict-peer-dependencies=false  auto-install-peers=true
   
# Avoid warnings on peer dependency mismatches, making it easier to manage dependency updates.
auto-install-peers=true                         # Automatically install missing peer dependencies without prompting, streamlining installation.

# --- Package Linking and Resolution ---
resolution-strategy=fast                        # Resolve dependencies quickly without deduplication; improves speed in large projects.
shamefully-hoist=true                           # Hoist dependencies for compatibility; useful for monorepos and tools that expect hoisting.

# --- Network and Fetching ---
fetch-retries=4                                 # Set retry count for failed fetches to improve resilience.
fetch-retry-factor=10                           # Increase the delay factor between retries for smoother networking.
fetch-retry-mintimeout=60000                    # Set minimum retry timeout to 1 minute.
fetch-retry-maxtimeout=120000                   # Set maximum retry timeout to 2 minutes.
network-concurrency=8                           # Limit network requests to 8 at a time for stable performance.
network-timeout=60000                           # Set network timeout to 1 minute for slow connections or CI environments.

# --- Lockfile ---
#lockfile-only=true                              # Only update the lockfile on `pnpm install`, avoiding unwanted version changes.
prefer-offline=true                             # Use local cache if available, reducing external requests and speeding up installs.

# --- Symlink Configuration ---
symlink=false                                   # Disable symlinks if operating in environments that struggle with them (e.g., network filesystems).
hoist-pattern[]=@types/*                        # Hoist only the types packages, useful for TypeScript projects.
hoist-pattern[]=react                           # Hoist core dependencies, avoiding duplication in node_modules.

# --- Miscellaneous ---
node-linker=hoisted                             # Use a hoisted node_modules structure for compatibility with some tools.
save-workspace-protocol=true                    # Use workspace: protocol for local dependencies, which improves version control.
max-old-space-size=4096                         # Adjust Node.js memory limit for large projects; 4GB is typically sufficient.
strict-binary-dependencies=false                # Allow binaries to be missing if not required, improving flexibility in CI/CD.

# --- Workspace Specific ---
virtual-store-dir=.pnpm                         # Customize the virtual store directory location for cleaner structure.
link-workspace-packages=deep                    # Link workspace packages with deep linking for better isolation.
